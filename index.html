<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For My Queen üëë</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&family=Outfit:wght@300;400;600&family=Playfair+Display:ital,wght@1,500&display=swap" rel="stylesheet">
    
    <style>
        /* --- CORE SETTINGS --- */
        :root {
            --primary: #be185d;
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }
        body {
            font-family: 'Outfit', sans-serif;
            background-color: #000;
            color: #fff;
            overflow: hidden; /* Prevent scrolling, we handle it manually */
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        /* --- BACKGROUND --- */
        .bg-gradient-anim {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(-45deg, #2e1065, #be185d, #831843, #0f172a);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            z-index: -2;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- FLOATING PARTICLES --- */
        .particle {
            position: absolute;
            background: rgba(255,255,255,0.5);
            border-radius: 50%;
            pointer-events: none;
            z-index: -1;
        }

        /* --- SECTIONS (SCREENS) --- */
        .screen {
            position: absolute;
            top: 0; left: 0;
            width: 100%;
            height: 100dvh; /* Mobile friendly height */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s ease;
            padding: 20px;
            box-sizing: border-box;
        }
        .screen.active {
            opacity: 1;
            pointer-events: auto;
            z-index: 10;
        }

        /* --- GLASS CARDS --- */
        .glass-panel {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        /* --- TYPOGRAPHY --- */
        .font-hand { font-family: 'Dancing Script', cursive; }
        .font-serif { font-family: 'Playfair Display', serif; }

        /* --- PHOTO CAROUSEL (STACKED) --- */
        .photo-stack {
            position: relative;
            width: 280px;
            height: 400px;
            margin-top: 20px;
        }
        .photo-card {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            border-radius: 20px;
            background-size: cover;
            background-position: center;
            border: 4px solid #fff;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            transition: transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.5s;
            display: flex;
            align-items: flex-end;
            overflow: hidden;
        }
        .photo-caption {
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            color: white;
            width: 100%;
            padding: 20px;
            text-align: center;
            font-size: 14px;
        }

        /* --- REASONS CARDS --- */
        .reason-card {
            background: white;
            color: #be185d;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            width: 85%;
            max-width: 350px;
            transform: scale(0.9);
            opacity: 0;
            position: absolute;
            transition: all 0.5s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .reason-card.current {
            transform: scale(1);
            opacity: 1;
            z-index: 2;
        }
        .reason-card.next {
            transform: scale(0.95) translateY(10px);
            opacity: 0.6;
            z-index: 1;
        }

        /* --- ENVELOPE (OPTIMIZED) --- */
        .envelope-container {
            perspective: 1000px;
            width: 300px;
            height: 200px;
            cursor: pointer;
        }
        .envelope-body {
            position: relative;
            width: 100%; height: 100%;
            background: #e11d48;
            border-radius: 0 0 10px 10px;
            z-index: 10;
        }
        .flap {
            position: absolute;
            top: 0; left: 0; width: 0; height: 0;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-top: 110px solid #fb7185;
            transform-origin: top;
            transition: transform 0.6s ease;
            z-index: 11;
        }
        .envelope-container.open .flap {
            transform: rotateX(180deg);
            z-index: 1;
        }
        .letter-paper {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 90%;
            height: 85dvh;
            background: #ffffff;
            color: #333;
            padding: 25px;
            border-radius: 5px;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            z-index: 100;
            overflow-y: auto;
            opacity: 0;
            transition: all 0.8s ease;
        }
        .letter-paper.visible {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }
        
        /* --- UTILS --- */
        .btn-pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(236, 72, 153, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(236, 72, 153, 0); }
            100% { box-shadow: 0 0 0 0 rgba(236, 72, 153, 0); }
        }
    </style>
</head>
<body>

    <div class="bg-gradient-anim"></div>
    <div id="particle-container"></div>

    <button onclick="toggleMusic()" id="music-btn" class="fixed top-4 right-4 z-50 bg-white/10 backdrop-blur-md p-3 rounded-full text-xl border border-white/20">
        üîá
    </button>
    <audio id="bgMusic" loop>
        <source src="love_song.mp3" type="audio/mpeg">
    </audio>

    <div id="screen-1" class="screen active text-center">
        <div class="glass-panel p-8 md:p-12 flex flex-col items-center">
            <h1 class="font-hand text-6xl text-pink-300 mb-2 drop-shadow-lg">Hey Amna</h1>
            <p class="text-pink-100 text-lg mb-8 font-light tracking-wide">I made something for you...</p>
            
            <button onclick="nextScreen(2)" class="w-20 h-20 bg-pink-600 rounded-full flex items-center justify-center text-3xl shadow-lg btn-pulse border-4 border-pink-400/50 transition active:scale-95">
                üíå
            </button>
        </div>
    </div>

    <div id="screen-2" class="screen text-center">
        <h2 class="font-hand text-5xl md:text-7xl mb-6 text-pink-200 leading-tight" id="wish-text">
            Happy <br> Valentine's <br> Day üåπ
        </h2>
        <p class="font-serif italic text-xl text-pink-100/80 max-w-md px-6">
            "In a world full of temporary things, you are a perpetual feeling."
        </p>
        
        <div class="absolute bottom-12 w-full flex justify-center">
            <button onclick="nextScreen(3)" class="glass-panel px-8 py-3 text-pink-100 hover:bg-white/10 transition flex items-center gap-2">
                Our Memories <span>‚Üí</span>
            </button>
        </div>
    </div>

    <div id="screen-3" class="screen overflow-hidden">
        <h3 class="font-hand text-4xl mb-4 text-pink-200">Us ‚ù§Ô∏è</h3>
        
        <div class="photo-stack" id="photo-stack">
            </div>

        <p class="mt-8 text-sm text-pink-200/60 animate-bounce">Tap photo for next</p>

        <div class="absolute bottom-12 w-full flex justify-center">
            <button onclick="nextScreen(4)" class="glass-panel px-8 py-3 text-pink-100 hover:bg-white/10 transition">
                Why I Love You ‚Üí
            </button>
        </div>
    </div>

    <div id="screen-4" class="screen">
        <h3 class="font-hand text-4xl mb-8 text-pink-200">Why You?</h3>
        
        <div class="relative w-full h-64 flex justify-center items-center" id="reasons-container">
            </div>

        <button onclick="cycleReasons()" class="mt-8 text-pink-300 border-b border-pink-300/50 pb-1 text-sm">
            Next Reason ‚Üª
        </button>

        <div class="absolute bottom-12 w-full flex justify-center">
            <button onclick="nextScreen(5)" class="glass-panel px-8 py-3 text-pink-100 hover:bg-white/10 transition">
                Open Letter üíå
            </button>
        </div>
    </div>

    <div id="screen-5" class="screen">
        <h3 class="font-hand text-3xl mb-8 text-pink-200 animate-pulse">For You...</h3>
        
        <div class="envelope-container" onclick="openLetter()">
            <div class="envelope-body flex items-center justify-center">
                <span class="text-4xl">‚ù§Ô∏è</span>
            </div>
            <div class="flap"></div>
        </div>

        <p class="mt-6 text-sm text-pink-200/70">Tap to open</p>
    </div>

    <div id="full-letter" class="letter-paper font-serif leading-relaxed text-gray-800">
        <button onclick="closeLetter()" class="absolute top-4 right-4 text-2xl text-gray-400">&times;</button>
        
        <div class="text-center mb-6">
            <div class="inline-block px-4 py-1 border-b-2 border-pink-400 text-pink-600 font-bold uppercase tracking-widest text-xs">
                Love Letter
            </div>
        </div>

        <h2 class="font-hand text-4xl text-center text-rose-600 mb-6">My Dearest Amna,</h2>

        <p class="mb-4">
            Today isn't just about Valentine's Day; it's about celebrating the fact that you exist and that I am lucky enough to know you.
        </p>
        <p class="mb-4">
            You are the calm in my chaos and the spark in my routine. Every time I see your name pop up on my phone, I smile like an idiot. Every time we meet, my worries disappear.
        </p>
        <p class="mb-4 text-rose-600 font-semibold italic border-l-4 border-rose-300 pl-4">
            "Tum meri wo khwahish ho jo har dua mein shamil hai."
        </p>
        <p class="mb-4">
            I promise to always support your dreams, to listen to your rants, to bring you food when you're hangry, and to love you even when you're being stubborn.
        </p>
        <p class="mb-6">
            Thank you for being my partner, my best friend, and my queen.
        </p>

        <div class="text-right mt-8">
            <p class="italic text-gray-500 text-sm">Yours Forever,</p>
            <p class="font-hand text-3xl text-rose-600 mt-2">Dev</p>
        </div>

        <div class="mt-10 text-center">
            <button onclick="location.reload()" class="px-6 py-2 bg-rose-100 text-rose-600 rounded-full text-sm font-bold">
                Read Again ‚Üª
            </button>
        </div>
    </div>

    <script>
        // --- CONFIGURATION ---
        // Add more photos here. It handles any aspect ratio cleanly.
        const photos = [
            { src: "pic1.png", caption: "The day we met ‚ù§Ô∏è" },
            { src: "pic2.jpg", caption: "You look beautiful here ‚ú®" },
            { src: "pic3.png", caption: "Crazy times! ü§™" },
            { src: "pic4.jpg", caption: "My favorite view üòç" },
            { src: "pic5.png", caption: "Partners in crime üïµÔ∏è‚Äç‚ôÄÔ∏è" }
        ];

        const reasons = [
            "Your smile literally lights up the room.",
            "You have the kindest heart I know.",
            "You make even boring days feel like an adventure.",
            "The way you look at me makes me feel invincible.",
            "You understand me without me saying a word."
        ];

        // --- MUSIC CONTROL ---
        let musicPlaying = false;
        const audio = document.getElementById('bgMusic');
        const musicBtn = document.getElementById('music-btn');

        function toggleMusic() {
            if(musicPlaying) {
                audio.pause();
                musicBtn.innerText = "üîá";
            } else {
                audio.play().catch(e => console.log("Interaction needed"));
                musicBtn.innerText = "üéµ";
            }
            musicPlaying = !musicPlaying;
        }

        // --- NAVIGATION ---
        function nextScreen(id) {
            // Play music on first interaction if not playing
            if(id === 2 && !musicPlaying) toggleMusic();

            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            const next = document.getElementById(`screen-${id}`);
            next.classList.add('active');

            // Trigger animations based on screen
            if(id === 2) {
                gsap.from("#wish-text", { scale: 0.5, opacity: 0, duration: 1.5, ease: "elastic.out(1, 0.3)" });
            }
            if(id === 3) initPhotoStack();
            if(id === 4) initReasons();
        }

        // --- PHOTO STACK LOGIC ---
        function initPhotoStack() {
            const container = document.getElementById('photo-stack');
            container.innerHTML = '';
            
            // Reverse so first item is on top in DOM order for z-index simplicity
            [...photos].reverse().forEach((photo, i) => {
                const card = document.createElement('div');
                card.className = 'photo-card';
                card.style.backgroundImage = `url(${photo.src})`;
                card.style.zIndex = i;
                // Add random slight rotation for messy stack look
                card.style.transform = `rotate(${Math.random() * 10 - 5}deg)`;
                
                card.innerHTML = `<div class="photo-caption">${photo.caption}</div>`;
                
                card.onclick = () => {
                    // Fly away animation
                    gsap.to(card, { 
                        x: 200, 
                        rotation: 40, 
                        opacity: 0, 
                        duration: 0.5, 
                        onComplete: () => {
                            container.prepend(card); // Move to back
                            gsap.set(card, { x: 0, opacity: 1, rotation: Math.random() * 10 - 5, scale: 0.9 });
                            gsap.to(card, { scale: 1, duration: 0.3, delay: 0.1 }); // Pop back in at back
                        }
                    });
                };
                container.appendChild(card);
            });
        }

        // --- REASONS LOGIC ---
        let currentReason = 0;
        function initReasons() {
            const container = document.getElementById('reasons-container');
            container.innerHTML = '';
            reasons.forEach((text, i) => {
                const div = document.createElement('div');
                div.className = `reason-card ${i === 0 ? 'current' : 'next'}`;
                div.innerHTML = `<h1 class="text-4xl mb-2">üíñ</h1><p class="font-serif text-lg">${text}</p>`;
                container.appendChild(div);
            });
        }

        function cycleReasons() {
            const cards = document.querySelectorAll('.reason-card');
            const total = cards.length;
            
            // Current flies out
            gsap.to(cards[currentReason], { 
                y: -50, opacity: 0, scale: 0.8, duration: 0.4,
                onComplete: function() {
                    this.targets()[0].className = 'reason-card next';
                    gsap.set(this.targets()[0], { y: 0 }); // Reset pos
                }
            });

            // Next comes in
            currentReason = (currentReason + 1) % total;
            const nextCard = cards[currentReason];
            
            gsap.fromTo(nextCard, 
                { opacity: 0, scale: 0.9, y: 50 },
                { opacity: 1, scale: 1, y: 0, duration: 0.5, delay: 0.1, className: 'reason-card current' }
            );
        }

        // --- LETTER LOGIC ---
        function openLetter() {
            const container = document.querySelector('.envelope-container');
            container.classList.add('open');
            
            setTimeout(() => {
                document.getElementById('full-letter').classList.add('visible');
            }, 800);
        }

        function closeLetter() {
            document.getElementById('full-letter').classList.remove('visible');
            document.querySelector('.envelope-container').classList.remove('open');
        }

        // --- PARTICLE BACKGROUND ---
        function createParticles() {
            const container = document.getElementById('particle-container');
            for(let i=0; i<20; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                const size = Math.random() * 5 + 2;
                p.style.width = size + 'px';
                p.style.height = size + 'px';
                p.style.left = Math.random() * 100 + 'vw';
                p.style.top = Math.random() * 100 + 'vh';
                p.style.opacity = Math.random() * 0.5 + 0.1;
                
                container.appendChild(p);

                gsap.to(p, {
                    y: -100,
                    x: Math.random() * 50 - 25,
                    duration: Math.random() * 10 + 5,
                    repeat: -1,
                    ease: "none"
                });
            }
        }
        createParticles();

    </script>
</body>
</html>
